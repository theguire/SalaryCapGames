@model int

@{
    Layout = null;
}


<form asp-controller="Franchises" id="theModal" asp-action="Purchase" method="post" class="modal fade" role="form">
    <fieldset>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" type="button" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Select Purchase Model</h4>
                </div>

                <div class="col-auto modal-body">
                    <table class="table table-striped table-bordered">

                        <thead>
                            <tr>
                                <th scope="col">Franchises</th>
                                <th scope="col">Cost Per</th>
                                <th scope="col">Discount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="text-align:center;">1 - 2</td>
                                <td style="text-align:right;">$20.00</td>
                                <td style="text-align:right;">0%</td>
                            </tr>
                            <tr>
                                <td style="text-align:center;">3 - 4</td>
                                <td style="text-align:right;">$16.00</td>
                                <td style="text-align:right;">20%</td>
                            </tr>
                            <tr>
                                <td style="text-align:center;">5 - 10</td>
                                <td style="text-align:right;">$12.00</td>
                                <td style="text-align:right;">40%</td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                </div>
                <div class="form-row align-items-center">
                    <div class="col-auto my-2">
                        @*<select asp-for="SelectedProduct" class="custom-select mr-sm-2" id="inlineFormCustomSelect">*@
                            <select asp-for="@Model" class="custom-select mr-sm-2" id="inlineFormCustomSelect">
                                <option selected>Choose # Franchises...</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>

                            </select>
                            <button type="button" onclick="calcTotalCost()">Calculate Total</button>
</div>
                    <br />
                    <br />
                    <p style="color:red; font-size: large; " id="totalCost"></p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>

                    <button type="submit" id="submitCharge" disabled value="@Model" class="btn btn-primary">Proceed to Checkout</button>
                </div>

            </div>
        </div>
    </fieldset>
</form>

<script>
    function calcTotalCost() {
        var x = document.getElementById("inlineFormCustomSelect").value;
        alert(x);
        var cost;
        switch (parseInt(x)) {
            case 1:
            case 2:
                cost = x * 20.00;
                alert(cost);
                break;

            case 3:
            case 4:
                cost = x * 16.00;
                alert(cost);
                break;
            default:
                cost = x * 12.00;
                alert(cost);
                break;
        }

        document.getElementById("totalCost").innerHTML = "You will be charged $" + cost;
        document.getElementById("submitCharge").disabled = false;

    }

    $(function () {
        var showModal = function () {
            $("#theModal").modal("show");
        };

        $("#showModal").click(showModal);

    });

</script>